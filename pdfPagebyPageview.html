<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Book-like PDF Viewer</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/turn.js/4/turn.min.css"
    />
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f0f0f0;
      }
      #book {
        width: 80%;
        height: 80vh;
        margin: 5vh auto;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
        background-color: white;
      }
      .page {
        width: 100%;
        height: 100%;
      }
      canvas {
        width: 100%;
        height: auto;
      }
    </style>
  </head>
  <body>
    <h1 style="text-align: center">PDF Book Viewer</h1>
    <div id="book"></div>

    <script src="https://mozilla.github.io/pdf.js/build/pdf.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/turn.js/4/turn.min.js"></script>
    <script>
      const url = "my.pdf"; // Replace with your PDF file URL
      const pdfjsLib = window["pdfjs-dist/build/pdf"];
      pdfjsLib.GlobalWorkerOptions.workerSrc =
        "https://mozilla.github.io/pdf.js/build/pdf.worker.js";

      const book = document.getElementById("book");
      let pdfDoc = null;

      // Render a page to a canvas
      async function renderPageToCanvas(page, canvas) {
        const viewport = page.getViewport({ scale: 1.5 });
        canvas.width = viewport.width;
        canvas.height = viewport.height;

        const context = canvas.getContext("2d");
        await page.render({
          canvasContext: context,
          viewport: viewport,
        }).promise;
      }

      // Create a flipbook
      async function createBook(pdfDoc) {
        for (let i = 1; i <= pdfDoc.numPages; i++) {
          const canvas = document.createElement("canvas");
          canvas.classList.add("page");
          const page = await pdfDoc.getPage(i);
          await renderPageToCanvas(page, canvas);

          const div = document.createElement("div");
          div.classList.add("page");
          div.appendChild(canvas);

          book.appendChild(div);
        }

        // Initialize Turn.js
        $(book).turn({
          width: 800,
          height: 600,
          autoCenter: true,
        });
      }

      // Load the PDF and create the book
      pdfjsLib.getDocument(url).promise.then((pdfDoc_) => {
        pdfDoc = pdfDoc_;
        createBook(pdfDoc);
      });
    </script>
  </body>
</html>
